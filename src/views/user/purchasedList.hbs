<div class="purchased-list-wrapper">
    <div class="purchased-list-container">
        <div class="purchased-header">
            <h1><i class="fas fa-shopping-bag"></i> List of cars</h1>
        </div>

        <div class="purchased-content">
            {{#if user.metadata.purchasedProducts.length}}
                <div class="car-grid">
                    {{#each user.metadata.purchasedProducts}}
                    <div class="car-card">
                            <div class="car-image">
                                <img src="{{this.product.images.[0]}}" alt="{{this.product.brand}} {{this.product.model}}">
                            </div>
                            <div class="car-details">
                                <h3>{{this.product.brand}} {{this.product.model}}</h3>
                                <div class="car-info">
                                    <p><i class="fas fa-calendar"></i> Year: {{this.product.year}}</p>
                                    <p><i class="fas fa-tachometer-alt"></i> Mileage: {{formatNumber this.product.mileage}} km</p>
                                    <p><i class="fas fa-dollar-sign"></i> Price: {{formatCurrency this.product.price 'VND'}}</p>
                                </div>
                                <div class="purchase-info">
                                    <p><i class="fas fa-clock"></i> Purchase date: {{formatDate this.purchaseDate}}</p>
                                    <p><i class="fas fa-box"></i> Quantity: {{this.quantity}}</p>
                                    <p><i class="fas fa-check-circle"></i> Status: Bought</p>
                                </div>
                                <a href="/products/{{this._id}}" class="btn btn-primary btn-view-details">
                                    <i class="fas fa-eye"></i> View details
                                </a>
                                {{#if (eq this.reviewStatus "reviewed")}}
                                    <a class="btn btn-secondary btn-reviewed" disabled>
                                        <i class="fas fa-check"></i> Already reviewed
                                    </a>
                                {{else}}
                                    <a class="btn btn-secondary btn-rate-product" data-id="{{this._id}}">
                                        <i class="fas fa-star"></i> Leave a review
                                    </a>
                                {{/if}}
                            </div>
                        </div>
                    {{/each}}
                </div>
            {{else}}
                <div class="empty-state">
                    <i class="fas fa-car-side empty-icon"></i>
                    <p>You haven't bought any cars</p>
                    <a href="/products" class="btn btn-primary">See cars list</a>
                </div>
            {{/if}}
        </div>
    </div>
</div>
<script type="module" src="/js/user/purchasedList.js"></script>

<style>
/* Purchased List Styles */
.purchased-list-wrapper {
    background-color: #f8f9fa;
    padding: 50px 0;
}

.purchased-list-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 15px;
}

.purchased-header {
    margin-bottom: 2rem;
    text-align: center;
    border-bottom: 2px solid #007bff;
    padding-bottom: 1rem;
}

.purchased-header h1 {
    color: #007bff;
    font-size: 2.5rem;
    font-weight: bold;
}

.car-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
}

.car-card {
    border: none;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    background-color: #fff;
    display: flex;
    flex-direction: column;
}

.car-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

.car-image {
    height: 200px;
    overflow: hidden;
}

.car-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.car-card:hover .car-image img {
    transform: scale(1.05);
}

.car-details {
    padding: 1.5rem;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.car-details h3 {
    margin-bottom: 1rem;
    color: #333;
    font-size: 1.2rem;
    font-weight: bold;
}

.car-info, .purchase-info {
    margin-bottom: 1rem;
}

.car-info p, .purchase-info p {
    margin: 0.5rem 0;
    color: #666;
    font-size: 0.9rem;
}

.empty-state {
    text-align: center;
    padding: 4rem;
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.empty-icon {
    font-size: 5rem;
    color: #007bff;
    margin-bottom: 1.5rem;
}

.btn {
    width: 100%;
    padding: 0.75rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.3s ease, color 0.3s ease;
    margin-top: 0.5rem;
}

.btn-view-details {
    background-color: #007bff;
    color: #fff;
}

.btn-view-details:hover {
    background-color: #0056b3;
}

.btn-rate-product {
    background-color: #07ffea;
    color: #212529;
}

.btn-rate-product:hover {
    background-color: #06e6d3;
    color: #fff;
}

.btn-reviewed {
    background-color: #6c757d;
    color: #fff;
}

@media (max-width: 1200px) {
    .car-details h3 {
        font-size: 1.1rem;
    }
    .car-info p, .purchase-info p {
        font-size: 0.8rem;
    }
}

@media (max-width: 768px) {
    .car-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 576px) {
    .car-grid {
        grid-template-columns: 1fr;
    }
}
</style>